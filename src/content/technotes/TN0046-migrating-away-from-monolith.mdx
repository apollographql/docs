---
title: Migrating from monolitic to federated architecture
id: TN0046
description: Using the strangulation pattern to remove the monolith
tags: [federation, transformation, organization]
---

## Introduction

Many organizations aim to transition from a monolithic architecture to a [federated one](/federation). This process can seem challenging, but at Apollo, we've observed numerous successful migrations away from monoliths.

This tech note explores one of the most successful migration patterns: **the strangulation pattern**. This approach allows for iterative and progressive changes, providing businesses with the confidence to invest in transformative changes.

## Migration steps

The strangulation pattern involves logically dissecting the monolith and migrating each part incrementally. This approach enables a smooth transition away from a monolithic system while demonstrating gradual progress to your organization.

### Divide the monolith into distinct domains

The initial challenge is determining how to divide the monolith. Most companies choose to separate systems based on distinct domains. As an example, a typical e-commerce application often has domains such as:

- Product
- Inventory
- Cart
- Order
- Payment
- Customer Account

<img
  style="display: block; margin: 0 auto"
  src="./images/moving-away-from-the-monolith/1-the-monolith.jpg"
  alt="Abstract image of monolith"
  width="550"
/>

The simplified monolith setup illustrates how clients fetch data and their tight integration with the system.

<img
  src="./images/moving-away-from-the-monolith/2-typical-monolith-setup.jpg"
  alt="Diagram of a simplified and typical monolith setup"
  width="550"
/>

To overcome this, you can leverage [federated architecture](/federation).

### Decouple clients

The approach involves decoupling existing clients from the monolith onto an established contract provided by the federation layer, thus mitigating the risk of back-end changes affecting clients.

<img
  src="./images/moving-away-from-the-monolith/3-first-steps.jpg"
  alt="Diagram of taking the first steps"
  width="550"
/>

The API Gateway facilitates fetching data responses from the newly federated architecture by reconfiguring existing routes.

<Note>

Some client work may be needed to adapt to new or improved queries.

</Note>

### Incrementally migrate further domains

Once one subgraph is proven and tested, the pattern is established to add further subgraphs, progressively enhancing functionality in the Federation stack. It's crucial to keep the monolith as a data source initially, creating a contract that de-risks the migration and ensures reliable data service.

<img
  src="./images/moving-away-from-the-monolith/4-additional-subgraphs.jpg"
  alt="Diagram of the critical secons subgraph"
  width="550"
/>

With the strangulation pattern, the supergraph eventually handles all traffic for each client.

<img
  src="./images/moving-away-from-the-monolith/5-penultamate-state.jpg"
  alt="Diagram of the penultimate state of system"
  width="550"
/>

This marks the decoupled state, allowing the organization to begin the decommissioning phase by shutting down the monolith section by section.

<img
  style="display: block; margin: 0 auto"
  src="./images/moving-away-from-the-monolith/6-shutting-down-monolith-sections.jpg"
  alt="Diagram of the start of removing the monolith"
  width="550"
/>

The diagram shows newly created microservices serving domains previously handled by the monolith. This pattern hides implementation details from the client while fulfilling the agreed data response through the supergraph contract.

<img
  src="./images/moving-away-from-the-monolith/7-monolith-removed.jpg"
  alt="Diagram of the monolith now removed"
  width="550"
/>

The transformation is complete when all monolith domains have migrated, allowing the organization to successfully eliminate the monolith.

## Conclusion

While moving away from a deeply entrenched monolith may seem daunting, taking the strangulation pattern approach makes the task more manageable. You can use the supergraph to decouple systems, facilitating a seamless migration away from the monolith without impacting clients.
