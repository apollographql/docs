---
title: Migrating to cloud routing
subtitle: Learn how to migrate from a self-hosted to a cloud graph
description: Migrate your self-hosted GraphQL APIs to a federated cloud supergraph
---

<Tip>

Refer to [Router types](./#router-types) to learn the differences between self-hosted and cloud graphs.

</Tip>

GraphOS supports self-hosted and cloud graphs, each [recommended for different use cases](../graphs/#graph-types). You may want to migrate to a cloud graph in these scenarios:

- You have a [self-hosted supergraph](../graphs/#self-hosted-supergraphs) and want to offload the management of your router service to Apollo.
    - You router service may be either the Apollo Router or the [`@apollo/gateway` package](/apollo-server/using-federation/api/apollo-gateway/).
- You have one or more [self-hosted GraphQL APIs](../graphs/#monographs) and want to use GraphOS features beyond graph composition, for example, [`@defer` support](/router/executing-operations/defer-support/) and [metrics reporting](../metrics/).

GraphOS offers [two types of cloud routing](./#router-comparison): Serverless and Dedicated. With both, you offload router provisioning and management to Apollo. With [Dedicated](./cloud-dedicated), Apollo hosts your router on dedicated infrastructure that you control and scale.

## Prerequisites

Your subgraphs must be accessible outside of your private cloud environment so that a cloud router can connect to them. That means you must either:

- Make your subgraphs available via a publicly accessible URL, for example, `https://api.mycompany.com/subgraphA`
- Keep your subgraphs private but allow secure connections, for example, via [VPC peering](./cloud-dedicated/lattice/)

<Note>

If you have multiple subgraphs, _each_ needs to be exposed to Apollo. Your supergraph, however, should only be publicly accessible via your cloud router.

</Note>

### Migrating from `@apollo/gateway`

Cloud routers use the same [Apollo Router binary](https://github.com/apollographql/router) that you can self-host. Therefore, migrating from [`@apollo/gateway`](/apollo-server/using-federation/api/apollo-gateway/) entails migrating to the Apollo Router. Refer to the [Gateway migration guide](/router/migrating-from-gateway/) for tips.

### Router customizations

The Apollo Router supports a [few avenues for customization](/router/customizations/overview). Cloud routers don't support custom binaries nor Rhai scripts. To use cloud routing, you must migrate any such customizations to [external coprocessors](/router/customizations/coprocessor/) or to built-in router features.

<Note>

Serverless cloud routing doesn't support external coprocessors. Consider [Cloud Dedicated](./cloud-dedicated) if you need router customization.

</Note>

## Migration

To use the Serverless plan, follow [these steps](./org/plans#upgrading-to-a-current-plan) to change your organization's plan. If you are interested in [Cloud Dedicated](./cloud-dedicated), <TrackableLink href="mailto:cloud@apollographql.com" eventName="content_contact_cloud">get in touch</TrackableLink> to request access.

Once your organization is on the correct plan and your subgraphs are publicly available or allow secure connections, you can follow the [cloud setup guide](../../quickstart/cloud#from-an-existing-account) to get started. 

## Cloud pricing

Serverless pricing depends on the number of operations your cloud router processes. See the [pricing page](https://www.apollographql.com/pricing#cloud-hosted-router) for details. Dedicated pricing depends on [throughput](./cloud-dedicated/#gcu-performance) instead of operation volume.

<Note>

Operation volume isn't a good indicator of throughput requirements. Run a load test to estimate to estimate pricing on Cloud Dedicated.

</Note>

When you no longer host your router, router-to-subgraph communication may be inter-region, inter-Availablity Zone (AZ), or egress traffic. Be aware of how your new network topology may affect your cloud costs.