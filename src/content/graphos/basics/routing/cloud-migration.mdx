---
title: Migrating to cloud routing
subtitle: Learn how to migrate from a self-hosted to cloud graph
description: To-do
---

<Tip>

Refer to [Router types](./#router-types) to learn the differences between self-hosted and cloud graphs.

</Tip>

GraphOS supports self-hosted and cloud graphs, which are [recommended for different use cases](../graphs/#graph-types). You may want to migrate from a self-hosted to cloud graph in these scenarios:

- You have a [self-hosted **supergraph**](../graphs/#self-hosted-supergraphs) and want to offload the management of your router service—either the Apollo Router or the [`@apollo/gateway` package](/apollo-server/using-federation/api/apollo-gateway/)—to Apollo.
- You have one or more [self-hosted GraphQL APIs](../graphs/#monographs) and want to make use of GraphOS features beyond support for graph composition, for example, [`@defer` support](/router/executing-operations/defer-support/) and [metrics reporting](../metrics/).

With [Dedicated](./cloud-dedicated) cloud routing, you offload router provisioning and management to Apollo while maintaining control over scaling. 

## How to migrate

### Prerequisites

To make use of a cloud router, your subgraphs must be accessible outside of your private cloud environment. That means you need to either:

- Make your subgraphs available via a publicly accessible URL, for example `https://api.mycompany.com/subgraphA`
- Keep your subgraphs private, but allow for secure connections, for example, via [VPC peering](./cloud-dedicated/lattice/)

<Note>

If you have multiple subgraphs, each needs to be exposed to Apollo. Your supergraph, however, should only be publicly accessible via your cloud router.

</Note>

### Migration

To-do

## Migration considerations

### Migrating from `@apollo/gateway`

If you're migrating from the [`@apollo/gateway` package](/apollo-server/using-federation/api/apollo-gateway/) to cloud routing, you first need to migrate to the Apollo Router. Refer to the [Gateway migration guide](/router/migrating-from-gateway/) for tips.

### Router customizations

The Apollo Router supports a [few avenues for customization](/router/customizations/overview). Cloud routers don't support custom binaries nor Rhai scripts. To use cloud routing, you need to migrate any such customizations to an [external coprocessor](/router/customizations/coprocessor/) or built-in router features.

### Cloud billing

With Dedicated cloud routing, you pay per throughput instead of query volume. Query volume is not a good indicator of throughput requirements. Run a load test to estimate your bill.

Since you're not self-hosting your router service anymore, router to subgraph communication will be inter-region, AZ, or egress traffic. Be aware of how your new network topology will result in a different cloud bill.
