---
title: Understanding graphs
description: The heart of Apollo GraphOS
---

As its name suggests, **GraphOS** is a platform for building and managing **graphs**. Each graph corresponds to a GraphQL service in your organization.

A GraphQL service usually runs in more than one environment (such as staging or production), so every graph in GraphOS has one or more **variants** that each correspond to one environment:

```mermaid
graph TB;
  subgraph "A graph in GraphOS";
    direction LR
    staging(Staging<br/>variant);
    production(Production<br/>variant);
  end;
```

Each variant of a graph keeps track of its own separate GraphQL schemas and operation metrics.

## Graph types

Every graph in GraphOS is one of these graph types:

<table>

<thead>
<tr>
<th>
Graph type
</th>

<th>
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td>

[Cloud supergraph](#cloud-supergraphs)

</td>
<td>

A supergraph consisting of:

- A GraphOS-hosted **router**
- One or more **subgraphs** hosted in your infrastructure

**Recommended** for all organizations getting started with GraphOS.

</td>
</tr>

<tr>
<td>

[Self-hosted supergraph](#self-hosted-supergraphs)

(Enterprise only)

</td>
<td>

A supergraph consisting of:

- A **router** hosted in your infrastructure
- One or more **subgraphs** hosted in your infrastructure

Recommended for enterprise organizations that require full customization of their router, usually for advanced performance or data compliance reasons.

</td>
</tr>

<tr>
<td>

[Monograph](#monographs)

(Enterprise only)

</td>
<td>

**Not recommended.** A single GraphQL service hosted in your infrastructure with no router.

</td>
</tr>

</tbody>

</table>

### Cloud supergraphs

<Note>

Cloud supergraphs require an Apollo organization on the **Serverless** (free or paid) or **Dedicated** plan. [Learn more about plans.](../org/plans/#current-plans)

</Note>

**Cloud supergraphs** are recommended for every organization that's getting started with GraphOS. For every variant of a cloud supergraph, GraphOS provisions and manages a **router** that acts as the variant's public endpoint. Application clients communicate with this endpoint instead of communicating directly with your GraphQL server(s):

```mermaid
flowchart LR;
  clients(Clients);
  subgraph "GraphOS";
  router(["Router"]);
  end;
  subgraph "Your infrastructure";
  api["Your GraphQL<br/>server"];
  router --- api
  end;
  clients -.- router;
  class clients secondary;
```

The router automatically reports certain operation metrics to GraphOS, so you don't need to configure this reporting in your GraphQL servers.

<Tip>

[Learn more about cloud routing.](../cloud-routing)

</Tip>

Cloud supergraphs use an architecture called [Apollo Federation](/federation/). With federation, you can distribute your supergraph's capabilities across multiple GraphQL services, which are known as **subgraphs**. The router executes client operations across multiple subgraphs as needed:

```mermaid
flowchart LR;
  clients(Clients);
  subgraph "GraphOS";
  router(["Router"]);
  end;
  subgraph "Your infrastructure";
  products[Products subgraph];
  reviews[Reviews subgraph]
  router --- products & reviews
  end;
  clients -.- router;
  class clients secondary;
```

Even if your API currently uses only one GraphQL server, a cloud supergraph helps you add more subgraphs later as your organization grows.

<Tip>

[Get started with a cloud supergraph.](../quickstart/cloud/)

</Tip>

### Self-hosted supergraphs

<EnterpriseFeature>

**Self-hosted supergraphs are an [Enterprise feature](/graphos/enterprise/)** for organizations with advanced performance or compliance requirements. If your organization doesn't currently have an Enterprise plan, you can test out this functionality by signing up for a free [Enterprise trial](https://studio.apollographql.com/signup?type=enterprise-trial&referrer=docs-content).

</EnterpriseFeature>

With a self-hosted supergraph, GraphOS does not provision a router for your supergraph. Instead, you host your supergraph's router in your own infrastructure:

```mermaid
flowchart LR;
  clients(Clients);
  subgraph "Your infrastructure"
  router(["Router"]);
  serviceA[Products subgraph];
  serviceB[Reviews subgraph];
  router --- serviceA & serviceB;
  end;
  clients -.- router;
  class clients secondary;
```

Your self-hosted router is an instance of [the Apollo Router](/router/) (cloud supergraphs use the Apollo Router under the hood).

<Tip>

[See the Apollo Router docs.](/router/)

</Tip>

Self-hosted supergraphs provide full control over your router, but they also require handling its deployment and management. Before you adopt this graph type, make sure you have the necessary team structure to properly manage an additional service in your infrastructure.

<Tip>

[Get started with a self-hosted supergraph.](../quickstart/self-hosted/)

</Tip>

### Monographs

<EnterpriseFeature>

Monographs require an Apollo organization on the **Enterprise** plan. [Learn more about plans.](../org/plans/)

</EnterpriseFeature>

A **monograph** is a graph that consists of a single GraphQL server with no router:

```mermaid
flowchart LR;
  clients(Clients);
  subgraph "Your infrastructure"
  server[GraphQL server];
  end;
  clients -.- server;
  class clients secondary;
```

<Caution>

**We strongly recommend against monographs!** A monograph introduces significant technical and logistical scaling issues as more teams contribute to your graph and its schema.

Additionally, the router provides essential GraphOS functionality beyond support for multiple subgraphs. It also enables powerful features like [`@defer` support](/router/executing-operations/defer-support/) and straightforward [metrics reporting](../metrics/).

</Caution>

## Creating graphs

You can create a cloud supergraph or a _non_-cloud supergraph (self-hosted or monograph).

<Tabs labels={['Cloud','Non-cloud']}>

<Tab label="Cloud">

To create a cloud supergraph, see the [GraphOS quickstart](../quickstart/cloud/).

</Tab>

<Tab label="Non-cloud">

To create a non-cloud graph, follow these steps:

<EnterpriseFeature linkWithAnchor="https://www.apollographql.com/pricing#graphos-router" />

1. Go to your organization's **Graphs** tab in [GraphOS Studio](https://studio.apollographql.com/?referrer=docs-content).

2. Click **New Graph** in the top right. Studio displays the following dialog:

   <img className="screenshot" src="../../img/graph-creation.jpg" width="350" style="margin-bottom: 20px;" />

3. Specify an organization and title for your graph.

4. Specify your **Graph Architecture**:

   - To create a self-hosted supergraph, leave this as **Supergraph (default)**.
   - To create a monograph, switch this to **Monolith**.

5. Click **Next**. A dialog like the following appears (the details differ depending on which **Graph Architecture** you're using):

   <img src="../../img/register-schema-dialog.jpg" class="screenshot" alt="Schema registration options" width="500" />

6. **If you're creating a self-hosted supergraph,** select the version of Apollo Federation you're using from the **Supergraph Pipeline Track** dropdown.

Your graph has been created.

</Tab>
</Tabs>

Next, you need to publish your graph's schema(s) to Apollo using the Rover CLI. For details, see [Publishing schemas to GraphOS](../delivery/publishing-schemas/).

## Variants

To distinguish between instances of the same graph running in different environments (such as staging and production), you define multiple **variants** of your graph. Each variant has its own schemas, along with its own change history and metrics.

Each of your graph's variants is shown in [GraphOS Studio](https://studio.apollographql.com?referrer=docs-content):

<img src="../../img/graph-variants.jpg" className="screenshot" alt="Schema Changelog tab" width="400" />

### Creating a variant

See [this section](./federated-graphs/#adding-a-variant).

## Publishing schemas

See [Publishing schemas to GraphOS](../delivery/publishing-schemas/).
