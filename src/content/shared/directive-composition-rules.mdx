<RuleExpansionPanel
  title="DIRECTIVE_COMPOSITION"
  whatItDoes="Checks for issues when composing custom directives."
/>

<RuleExpansionPanel
  title="MERGED_NON_REPEATABLE_DIRECTIVE_ARGUMENTS"
  whatItDoes="Checks if a non-[`repeatable`](https://spec.graphql.org/draft/#sel-GAHnBRVABeBoB_2T) directive has been applied to the schema element in different subgraphs with different arguments. In this case, arguments values are merged using [directive configured strategies](/apollo-server/schema/directives/#in-subgraphs)."
  rationale="Arguments should be consistent across a non-[`repeatable`](https://spec.graphql.org/draft/#sel-GAHnBRVABeBoB_2T) directive's usage. If arguments differ, it may be a sign that subgraph owners need to communicate about the directive's usage. If the arguments _need_ to differ, consider using a [`repeatable`](https://spec.graphql.org/draft/#sel-GAHnBRVABeBoB_2T) directive."
>

<p style="margin-bottom: 0">❌</p>

```graphql title="Subgraph A"
type Product {
  id: ID!
  name: String
}

type Query {
  products: [Product] @customDirective(orderBy: ["name"]) #highlight-line
}
```

```graphql title="Subgraph B"
type Product {
  id: ID!
  name: String
}

type Query {
  products: [Product] @customDirective(orderBy: ["price"]) #highlight-line
}
```
<br/>
<p style="margin-bottom: 0">✅</p>

```graphql title="Subgraph A"
type Product {
  id: ID!
  name: String
}

type Query {
  products: [Product] @customDirective(orderBy: ["name", "price"]) #highlight-line
}
```

```graphql title="Subgraph B"
type Product {
  id: ID!
  name: String
}

type Query {
  products: [Product] @customDirective(orderBy: ["name", "price"]) #highlight-line
}
```

</RuleExpansionPanel>

<RuleExpansionPanel
  title="NO_EXECUTABLE_DIRECTIVE_INTERSECTION"
  whatItDoes="Checks for executable directive definitions with no shared [locations](https://spec.graphql.org/June2018/#ExecutableDirectiveLocation) across subgraphs."
  rationale="Directives must only be used in the locations they are declared to belong in. If the same executable directive is defined with different locations in different subgraphs, it may be a sign that subgraph owners need to communicate about the directive's usage."
>

<p style="margin-bottom: 0">❌</p>

```graphql title="Subgraph A"
directive @log(message: String!) on QUERY #highlight-line
```

```graphql title="Subgraph B"
directive @log(message: String!) on FIELD #highlight-line
```


<br/>
<p style="margin-bottom: 0">✅</p>


```graphql title="Subgraph A"
directive @log(message: String!) on QUERY | FIELD
```

```graphql title="Subgraph B"
directive @log(message: String!) on QUERY | FIELD
```

</RuleExpansionPanel>

<RuleExpansionPanel
  title="FROM_SUBGRAPH_DOES_NOT_EXIST"
  whatItDoes="Checks that the source subgraph specified by [`@override`](/federation/federated-types/federated-directives/#override) directive exists."
  rationale="The [`@override`](/federation/federated-types/federated-directives/#override) directive indicates that an object field is now resolved a different subgraph. The directive can't work unless you specify an existing subgraph to resolve the field from."
>

<p style="margin-bottom: 0">❌</p>

```graphql title="Subgraph A"
type Product @key(fields: "id") {
  id: ID!
  inStock: Boolean! @override(from: "Subgraph B")
}
```

```graphql title="Subgraph B"
# Subgraph B doesn't exist
```
<br/>
<p style="margin-bottom: 0">✅</p>

```graphql title="Subgraph A"
type Product @key(fields: "id") {
  id: ID!
  inStock: Boolean! @override(from: "Subgraph B")
}
```

```graphql title="Subgraph B"
type Product @key(fields: "id") {
  id: ID!
  inStock: Boolean!
}
```
</RuleExpansionPanel>